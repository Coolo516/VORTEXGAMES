<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VORTEX</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>

    <!-- Password Login Screen -->
    <div id="login-screen">
        <div class="login-box">
            <h1 class="title">VORTEX</h1>
            <p>Enter Password</p>
            <input type="password" id="password-input" placeholder="Password" autocomplete="off">
            <button onclick="checkPassword()">Enter</button>
            <p id="error-msg" style="color: red; margin-top: 10px; display: none;">Wrong password!</p>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="admin-panel" style="display: none;">
        <div class="admin-box">
            <h2>Admin Panel</h2>

            <div style="margin-bottom: 20px;">
                <input type="text" id="new-admin-pass" placeholder="New Admin Password">
                <button onclick="addAdminPassword()">Add Admin Password</button>
            </div>
            <div style="margin-bottom: 20px;">
                <input type="text" id="new-user-pass" placeholder="New User Password">
                <button onclick="addUserPassword()">Add User Password</button>
            </div>

            <div style="margin-bottom: 30px;">
                <input type="text" id="delete-pass" placeholder="Type password to delete">
                <button onclick="deletePassword()" style="background: #ff4444;">Delete Password</button>
            </div>

            <h3 style="margin-top: 30px;">Activity Log</h3>
            <div id="activity-log" style="max-height: 300px; overflow-y: auto; background: #001122; padding: 15px; border-radius: 10px; border: 1px solid #00ffff;">
                Loading logs...
            </div>

            <button onclick="logout()" style="margin-top: 30px; background: #ff0000;">Back to Login</button>
        </div>
    </div>

    <!-- Main Site -->
    <div id="main-site" style="display: none;">
        <button class="logout-btn" onclick="logout()">Logout</button>

        <!-- Home Screen -->
        <div id="home-screen">
            <h1 class="title">VORTEX</h1>
            <p class="subtitle">Unleash the Power</p>
            <div class="options">
                <button onclick="showSection('games')">Games</button>
                <button onclick="showSection('apps')">Apps</button>
                <button onclick="showSection('instructions')">Instructions</button>
                <button onclick="showAdmin()" id="admin-btn" style="display: none;">Admin Panel</button>
            </div>
        </div>

        <!-- Games Section -->
        <div id="games-section" class="section" style="display: none;">
            <button class="back-btn" onclick="showHome()">← Back</button>
            <h1 class="section-title">VORTEX Games</h1>
            
            <div class="game-list">
                <!-- FNAF Series -->
                <div class="game-card"><h2>Five Nights at Freddy's 1</h2><button onclick="copyLink('https://irv77.github.io/hd_fnaf/1/')">Copy Link</button></div>
                <div class="game-card"><h2>Five Nights at Freddy's 2</h2><button onclick="copyLink('https://irv77.github.io/hd_fnaf/2/')">Copy Link</button></div>
                <div class="game-card"><h2>Five Nights at Freddy's 3</h2><button onclick="copyLink('https://irv77.github.io/hd_fnaf/3/')">Copy Link</button></div>
                <div class="game-card"><h2>Five Nights at Freddy's 4</h2><button onclick="copyLink('https://irv77.github.io/hd_fnaf/4/')">Copy Link</button></div>
                <div class="game-card"><h2>Five Nights at Freddy's World</h2><button onclick="copyLink('https://irv77.github.io/hd_fnaf/w/')">Copy Link</button></div>
                
                <!-- Geometry Dash -->
                <div class="game-card"><h2>Geometry Dash</h2><p style="color: #00aaff; font-size: 0.9em;">Rhythm platformer</p><button onclick="copyLink('https://geometrydash-lite.io')">Copy Link</button></div>
                
                <!-- All Other Games -->
                <div class="game-card"><h2>Slope</h2><p style="color: #00aaff; font-size: 0.9em;">Endless high-speed ball rolling</p><button onclick="copyLink('https://slope3.com/')">Copy Link</button></div>
                <div class="game-card"><h2>Retro Bowl</h2><p style="color: #00aaff; font-size: 0.9em;">Retro football management</p><button onclick="copyLink('https://retrobowl.me/')">Copy Link</button></div>
                <div class="game-card"><h2>Basketball Stars</h2><p style="color: #00aaff; font-size: 0.9em;">1v1 basketball showdowns</p><button onclick="copyLink('https://basketball-stars.io/')">Copy Link</button></div>
                <div class="game-card"><h2>Moto X3M</h2><p style="color: #00aaff; font-size: 0.9em;">Insane bike stunts</p><button onclick="copyLink('https://unblocked-games.s3.amazonaws.com/moto-x3m.html')">Copy Link</button></div>
                <div class="game-card"><h2>Run 3</h2><p style="color: #00aaff; font-size: 0.9em;">Endless space runner</p><button onclick="copyLink('https://run-3online.github.io/')">Copy Link</button></div>
                <div class="game-card"><h2>1v1.LOL</h2><p style="color: #00aaff; font-size: 0.9em;">Building & shooting battle</p><button onclick="copyLink('https://1v1-lol-online.github.io')">Copy Link</button></div>
                <div class="game-card"><h2>Shell Shockers</h2><p style="color: #00aaff; font-size: 0.9em;">Egg-based FPS chaos</p><button onclick="copyLink('https://shellshock.io/')">Copy Link</button></div>
                <div class="game-card"><h2>Krunker</h2><p style="color: #00aaff; font-size: 0.9em;">Fast-paced voxel FPS</p><button onclick="copyLink('https://krunker.io/')">Copy Link</button></div>
                <div class="game-card"><h2>Paper.io 2</h2><p style="color: #00aaff; font-size: 0.9em;">Conquer the map</p><button onclick="copyLink('https://paper-io.com/')">Copy Link</button></div>
                <div class="game-card"><h2>Hole.io</h2><p style="color: #00aaff; font-size: 0.9em;">Eat the city as a black hole</p><button onclick="copyLink('https://hole-io.com/')">Copy Link</button></div>
                <div class="game-card"><h2>Smash Karts</h2><p style="color: #00aaff; font-size: 0.9em;">Kart racing with weapons</p><button onclick="copyLink('https://smashkarts.io/')">Copy Link</button></div>
                <div class="game-card"><h2>Monkey Mart</h2><p style="color: #00aaff; font-size: 0.9em;">Manage your monkey store</p><button onclick="copyLink('https://monkey-mart.io/')">Copy Link</button></div>
                <div class="game-card"><h2>Temple Run 2</h2><p style="color: #00aaff; font-size: 0.9em;">Endless temple escape</p><button onclick="copyLink('https://templerun.ee/')">Copy Link</button></div>
                <div class="game-card"><h2>Subway Surfers</h2><p style="color: #00aaff; font-size: 0.9em;">Iconic endless runner</p><button onclick="copyLink('https://subway-surfers.gg/')">Copy Link</button></div>
                <div class="game-card"><h2>Bloons TD 6</h2><p style="color: #00aaff; font-size: 0.9em;">Epic tower defense</p><button onclick="copyLink('https://ninjakiwi.com/Games/Bloons-Tower-Defense/Bloons-TD-6.html')">Copy Link</button></div>
                <div class="game-card"><h2>Among Us</h2><p style="color: #00aaff; font-size: 0.9em;">Social deduction multiplayer</p><button onclick="copyLink('https://amongusonline.io/')">Copy Link</button></div>
                <div class="game-card"><h2>Bitlife</h2><p style="color: #00aaff; font-size: 0.9em;">Life choices simulator</p><button onclick="copyLink('https://bitlifeonline.io/')">Copy Link</button></div>
                <div class="game-card"><h2>Cookie Clicker</h2><p style="color: #00aaff; font-size: 0.9em;">Idle baking empire</p><button onclick="copyLink('https://cookieclicker.ee/')">Copy Link</button></div>
                <div class="game-card"><h2>Drift Hunters</h2><p style="color: #00aaff; font-size: 0.9em;">Car drifting mastery</p><button onclick="copyLink('https://drifthunters.io/')">Copy Link</button></div>
                <div class="game-card"><h2>OvO</h2><p style="color: #00aaff; font-size: 0.9em;">Precision platformer</p><button onclick="copyLink('https://ovo-game.com/')">Copy Link</button></div>
                <div class="game-card"><h2>Tetris</h2><p style="color: #00aaff; font-size: 0.9em;">Classic block puzzle</p><button onclick="copyLink('https://tetrisunblocked.org/')">Copy Link</button></div>
                <div class="game-card"><h2>Basket Random</h2><p style="color: #00aaff; font-size: 0.9em;">Wacky physics basketball</p><button onclick="copyLink('https://basketrandom.io/')">Copy Link</button></div>
                <div class="game-card"><h2>Doodle Jump</h2><p style="color: #00aaff; font-size: 0.9em;">Endless jumping adventure</p><button onclick="copyLink('https://doodlejump.io/')">Copy Link</button></div>
                <div class="game-card"><h2>Fireboy and Watergirl</h2><p style="color: #00aaff; font-size: 0.9em;">Co-op element puzzles</p><button onclick="copyLink('https://fireboyandwatergirl.io/')">Copy Link</button></div>
                <div class="game-card"><h2>Happy Wheels</h2><p style="color: #00aaff; font-size: 0.9em;">Ragdoll physics mayhem</p><button onclick="copyLink('https://happywheels.io/')">Copy Link</button></div>
                <div class="game-card"><h2>Tanuki Sunset</h2><p style="color: #00aaff; font-size: 0.9em;">Raccoon skateboarding</p><button onclick="copyLink('https://tanukisunset.io/')">Copy Link</button></div>
            </div>
        </div>

        <!-- Apps Section -->
        <div id="apps-section" class="section" style="display: none;">
            <button class="back-btn" onclick="showHome()">← Back</button>
            <h1 class="section-title">VORTEX Apps</h1>
            
            <div class="game-list">
                <div class="game-card">
                    <h2>Interstellar Proxy</h2>
                    <p style="color: #00aaff; font-size: 0.9em;">Fast proxy with games & cloaking</p>
                    <button onclick="loadContent('https://interstellar-fr.vercel.app', 'apps')">Launch</button>
                </div>
                <div class="game-card">
                    <h2>Space Proxy</h2>
                    <p style="color: #00aaff; font-size: 0.9em;">Another powerful web proxy</p>
                    <button onclick="loadContent('https://dash.ddnssec.de', 'apps')">Launch</button>
                </div>
                <div class="game-card">
                    <h2>DaydreamX Proxy</h2>
                    <p style="color: #00aaff; font-size: 0.9em;">Advanced web proxy & unblocker</p>
                    <button onclick="loadContent('math.bostoncareercounselor.com', 'apps')">Launch</button>
                </div>
            </div>
        </div>

        <!-- Instructions Section -->
        <div id="instructions-section" class="section" style="display: none;">
            <button class="back-btn" onclick="showHome()">← Back</button>
            <h1 class="section-title">How to Play Games</h1>
            
            <div style="padding: 40px; max-width: 800px; margin: 0 auto; text-align: left; color: #00ffff; font-size: 1.2em; line-height: 1.8;">
                <p>To play any game on restricted networks (like school):</p>
                <ol>
                    <li>Go to the <strong>Games</strong> tab.</li>
                    <li>Find your game and click <strong>Copy Link</strong> — the URL is now in your clipboard!</li>
                    <li>Go to the <strong>Apps</strong> tab and click <strong>Launch</strong> on any proxy (Interstellar recommended).</li>
                    <li>In the proxy window, paste the copied link into the search bar and press Enter.</li>
                    <li>Be aware of ads, close any ads that may pop up (they could be a virus)</li>
                    <li>The game will load safely through the proxy — enjoy!</li>
                </ol>
                <p><strong>Tip:</strong> If one proxy is slow or blocked, try another. Interstellar usually works best for games.</p>
                <p>Copy Link buttons make it super easy — no typing URLs!</p>
            </div>
        </div>

        <!-- Full-Screen Player -->
        <div id="player" class="player" style="display: none;">
            <button class="back-overlay" onclick="hideContent()">← Back</button>
            <div id="loading-spinner" class="loading-spinner">
                <div class="spinner"></div>
                <p>Loading...</p>
            </div>
            <iframe id="content-iframe" frameborder="0" allowfullscreen allow="fullscreen" onload="document.getElementById('loading-spinner').style.display='none';"></iframe>
        </div>
    </div>

    <script>
        // Copy Link Function
        function copyLink(url) {
            navigator.clipboard.writeText(url).then(() => {
                alert('Link copied to clipboard! Paste it into a proxy in the Apps tab.');
            }).catch(() => {
                prompt('Copy this link:', url);
            });
        }

        // Your full Firebase and other code (unchanged from your last working version)
        const firebaseConfig = {
            databaseURL: "https://vortex-eb4a0-default-rtdb.firebaseio.com/"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const adminRef = db.ref('adminPasswords');
        const userRef = db.ref('userPasswords');
        const logRef = db.ref('activityLog');

        let isAdmin = false;

        window.onload = () => {
            document.getElementById('main-site').style.display = 'none';
            document.getElementById('admin-panel').style.display = 'none';
            document.getElementById('login-screen').style.display = 'block';

            logRef.on('value', (snapshot) => {
                const logs = snapshot.val() || [];
                updateActivityLog(logs);
            });
        };

        function updateActivityLog(logs) {
            const logDiv = document.getElementById('activity-log');
            logDiv.innerHTML = '';
            logs.slice().reverse().forEach(entry => {
                const p = document.createElement('p');
                p.textContent = entry;
                p.style.margin = '8px 0';
                p.style.fontSize = '0.9em';
                logDiv.appendChild(p);
            });
            if (logs.length === 0) logDiv.innerHTML = 'No activity yet.';
        }

        function logLogin(passwordUsed) {
            const now = new Date();
            const time = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            const date = now.toLocaleDateString();
            const entry = `Login successful! Password: ${passwordUsed} | Time: ${time} | Date: ${date}`;

            logRef.transaction(current => {
                if (!current) current = [];
                current.push(entry);
                return current;
            });
        }

        function checkPassword() {
            const input = document.getElementById('password-input').value.trim();

            adminRef.once('value').then(snapshot => {
                const admins = snapshot.val() || ['vortexontopfr'];
                if (admins.includes(input)) {
                    isAdmin = true;
                    logLogin(input);
                    showMainSite();
                    document.getElementById('admin-btn').style.display = 'block';
                    return;
                }

                userRef.once('value').then(snapshot2 => {
                    const users = snapshot2.val() || [];
                    if (users.includes(input)) {
                        isAdmin = false;
                        logLogin(input);
                        showMainSite();
                        document.getElementById('admin-btn').style.display = 'none';
                    } else {
                        document.getElementById('error-msg').style.display = 'block';
                    }
                });
            });
        }

        // Press Enter key to submit password
        document.getElementById('password-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });

        function showMainSite() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('main-site').style.display = 'block';
            showHome();
        }

        function showAdmin() {
            document.getElementById('main-site').style.display = 'none';
            document.getElementById('admin-panel').style.display = 'block';
        }

        function addAdminPassword() {
            const pass = document.getElementById('new-admin-pass').value.trim();
            if (!pass) return alert('Enter a password');

            adminRef.transaction(current => {
                if (!current) current = ['vortexontopfr'];
                if (!current.includes(pass)) current.push(pass);
                return current;
            }).then(() => {
                alert('Admin password added!');
                document.getElementById('new-admin-pass').value = '';
            });
        }

        function addUserPassword() {
            const pass = document.getElementById('new-user-pass').value.trim();
            if (!pass) return alert('Enter a password');

            userRef.transaction(current => {
                if (!current) current = [];
                if (!current.includes(pass)) current.push(pass);
                return current;
            }).then(() => {
                alert('User password added!');
                document.getElementById('new-user-pass').value = '';
            });
        }

        function deletePassword() {
            const pass = document.getElementById('delete-pass').value.trim();
            if (!pass) return alert('Enter a password');

            adminRef.transaction(current => {
                if (current && current.includes(pass)) {
                    return current.filter(p => p !== pass);
                }
                return current;
            }).then(() => {
                userRef.transaction(current => {
                    if (current && current.includes(pass)) {
                        return current.filter(p => p !== pass);
                    }
                    return current;
                }).then(() => {
                    alert('Password deleted if it existed!');
                    document.getElementById('delete-pass').value = '';
                });
            });
        }

        function logout() {
            document.getElementById('main-site').style.display = 'none';
            document.getElementById('admin-panel').style.display = 'none';
            document.getElementById('login-screen').style.display = 'block';
            document.getElementById('password-input').value = '';
            document.getElementById('error-msg').style.display = 'none';
            hideContent();
        }

        let currentSection = '';

        function showHome() {
            document.getElementById('home-screen').style.display = 'flex';
            document.getElementById('games-section').style.display = 'none';
            document.getElementById('apps-section').style.display = 'none';
            document.getElementById('instructions-section').style.display = 'none';
            document.getElementById('player').style.display = 'none';
        }

        function showSection(section) {
            document.getElementById('home-screen').style.display = 'none';
            document.getElementById('games-section').style.display = section === 'games' ? 'block' : 'none';
            document.getElementById('apps-section').style.display = section === 'apps' ? 'block' : 'none';
            document.getElementById('instructions-section').style.display = section === 'instructions' ? 'block' : 'none';
        }

        function loadContent(url, section) {
            const iframe = document.getElementById('content-iframe');
            const player = document.getElementById('player');
            const spinner = document.getElementById('loading-spinner');
            
            currentSection = section;
            iframe.src = url;
            spinner.style.display = 'block';
            player.style.display = 'flex';
            document.getElementById('games-section').style.display = 'none';
            document.getElementById('apps-section').style.display = 'none';
            document.getElementById('instructions-section').style.display = 'none';
        }

        function hideContent() {
            const iframe = document.getElementById('content-iframe');
            const player = document.getElementById('player');
            
            iframe.src = '';
            player.style.display = 'none';
            
            if (currentSection === 'games') {
                document.getElementById('games-section').style.display = 'block';
            } else if (currentSection === 'apps') {
                document.getElementById('apps-section').style.display = 'block';
            } else if (currentSection === 'instructions') {
                document.getElementById('instructions-section').style.display = 'block';
            }
        }

        // Continuous Blue Trail Effect
        document.addEventListener('mousemove', (e) => {
            const particle = document.createElement('div');
            particle.classList.add('trail-particle');
            
            const size = Math.random() * 10 + 5;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            
            particle.style.left = `${e.clientX}px`;
            particle.style.top = `${e.clientY}px`;
            
            const offsetX = Math.random() * 20 - 10;
            const offsetY = Math.random() * 20 - 10;
            particle.style.transform = `translate(${offsetX}px, ${offsetY}px)`;

            const duration = Math.random() * 0.7 + 0.8;
            particle.style.animationDuration = `${duration}s`;

            document.body.appendChild(particle);

            particle.addEventListener('animationend', () => {
                particle.remove();
            });
        });
    </script>
</body>
</html>

